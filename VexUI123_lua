--[[
____   ____     ____  ___     .___
\   \ /   /____ \   /  /__ |   |
\   Y   // __ \ \     /|  |  \   |
\     /\  / /     |  |  /   |
_/  _  >/\  _/|__|
/      _/
VexUI2 | Full-Featured | Final
Author: Perdi / Inspired by WindUI
--]]

local VexUI = {}
VexUI.__index = VexUI

-- Services
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")

-- Default properties
VexUI.DefaultProperties = {
ScreenGui = {ResetOnSpawn=false, ZIndexBehavior="Sibling"},
Frame = {BackgroundColor3=Color3.new(0,0,0), BorderSizePixel=0},
TextLabel = {BackgroundTransparency=1, TextColor3=Color3.new(1,1,1), TextSize=14, RichText=true, Text="" },
TextButton = {BackgroundTransparency=1, AutoButtonColor=false, TextColor3=Color3.new(1,1,1), TextSize=14, Text="" },
TextBox = {BackgroundColor3=Color3.new(1,1,1), BorderColor3=Color3.new(0,0,0), TextColor3=Color3.new(0,0,0), TextSize=14 },
ImageLabel = {BackgroundTransparency=1, BorderSizePixel=0},
ImageButton = {BackgroundTransparency=1, AutoButtonColor=false},
UIListLayout = {SortOrder="LayoutOrder"},
ScrollingFrame = {ScrollBarImageTransparency=1, BorderSizePixel=0}
}

-- Theme
VexUI.Theme = {
Primary = Color3.fromHex("#FF3366"),
Accent = Color3.fromHex("#1E90FF"),
Background = Color3.fromHex("#050008"),
Text = Color3.fromHex("#FFE6FF"),
Button = Color3.fromHex("#FF00AA"),
Icon = Color3.fromHex("#0066CC")
}

-- UTIL: Create UI object
function VexUI:New(Class, Props, Parent)
local Obj = Instance.new(Class)
for k,v in pairs(self.DefaultProperties[Class] or {}) do Obj[k] = v end
if Props then for k,v in pairs(Props) do Obj[k] = v end end
if Parent then Obj.Parent = Parent end
return Obj
end

-- UTIL: Tween
function VexUI:Tween(Object, Time, Props)
local tw = TweenService:Create(Object, TweenInfo.new(Time, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), Props)
tw:Play()
return tw
end

-- UTIL: Gradient
function VexUI:Gradient(Keypoints, Extra)
local Colors, Transp = {}, {}
for k,v in pairs(Keypoints) do
local t = tonumber(k)/100
table.insert(Colors, ColorSequenceKeypoint.new(t, v.Color))
table.insert(Transp, NumberSequenceKeypoint.new(t, v.Transparency or 0))
end
table.sort(Colors, function(a,b) return a.Time < b.Time end)
table.sort(Transp, function(a,b) return a.Time < b.Time end)
local grad = {Color = ColorSequence.new(Colors), Transparency = NumberSequence.new(Transp)}
if Extra then for k,v in pairs(Extra) do grad[k] = v end end
return grad
end

-- Create Window
function VexUI:CreateWindow(Config)
local Window = {}
Window.Holder = self:New("ScreenGui", {}, Players.LocalPlayer:WaitForChild("PlayerGui"))
Window.Main = self:New("Frame", {
Size = UDim2.fromOffset(400,200),
Position = UDim2.new(0.5,0,0.5,0),
AnchorPoint = Vector2.new(0.5,0.5),
BackgroundColor3 = self.Theme.Background
}, Window.Holder)

-- Drag    
local dragging, dragStart, startPos = false    
Window.Main.InputBegan:Connect(function(i)    
    if i.UserInputType == Enum.UserInputType.MouseButton1 then    
        dragging = true    
        dragStart = i.Position    
        startPos = Window.Main.Position    
        i.Changed:Connect(function()    
            if i.UserInputState == Enum.UserInputState.End then    
                dragging = false    
            end    
        end)    
    end    
end)    
Window.Main.InputChanged:Connect(function(i)    
    if dragging and i.UserInputType == Enum.UserInputType.MouseMovement then    
        local delta = i.Position - dragStart    
        Window.Main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)    
    end    
end)    

Window.TabHolder = self:New("Frame",{Size=UDim2.new(1,0,1,0), BackgroundTransparency=1, Parent=Window.Main})    

function Window:Tab(TabName)    
    local Tab = {}    
    Tab.Frame = VexUI:New("Frame",{Size=UDim2.new(1,0,1,0), BackgroundTransparency=1, Visible=false, Parent=Window.TabHolder})    
    Tab.Buttons = {}    

    -- BUTTON  
    function Tab:Button(Name, Callback)    
        local btn = VexUI:New("TextButton", {    
            Text = Name,    
            BackgroundColor3 = VexUI.Theme.Button,    
            TextColor3 = VexUI.Theme.Text,    
            Size = UDim2.new(0,150,0,30),    
            Parent = Tab.Frame    
        })    
        btn.MouseButton1Click:Connect(Callback)    
        table.insert(Tab.Buttons, btn)    
        return btn    
    end    

    -- TOGGLE  
    function Tab:Toggle(Name, Callback)    
        local toggle = VexUI:New("TextButton", {    
            Text = Name.." [OFF]",    
            BackgroundColor3 = VexUI.Theme.Button,    
            TextColor3 = VexUI.Theme.Text,    
            Size = UDim2.new(0,150,0,30),    
            Parent = Tab.Frame    
        })    
        local state = false    
        toggle.MouseButton1Click:Connect(function()    
            state = not state    
            toggle.Text = Name.." ["..(state and "ON" or "OFF").."]"    
            if Callback then Callback(state) end    
        end)    
        table.insert(Tab.Buttons, toggle)    
        return toggle    
    end    

    -- SLIDER  
    function Tab:Slider(Name, Min, Max, Default, Callback)    
        local slider = VexUI:New("TextButton", {    
            Text = Name.." ["..Default.."]",    
            BackgroundColor3 = VexUI.Theme.Button,    
            TextColor3 = VexUI.Theme.Text,    
            Size = UDim2.new(0,150,0,30),    
            Parent = Tab.Frame    
        })    
        local value = Default    
        slider.MouseButton1Click:Connect(function()    
            value = math.random(Min, Max)    
            slider.Text = Name.." ["..value.."]"    
            if Callback then Callback(value) end    
        end)    
        table.insert(Tab.Buttons, slider)    
        return slider    
    end    

    -- DROPDOWN  
    function Tab:Dropdown(Name, Options, Callback)    
        local dd = VexUI:New("TextButton", {    
            Text = Name.." ▼",    
            BackgroundColor3 = VexUI.Theme.Button,    
            TextColor3 = VexUI.Theme.Text,    
            Size = UDim2.new(0,150,0,30),    
            Parent = Tab.Frame    
        })    
        local listVisible = false    
        local listFrame = VexUI:New("Frame", {    
            Size = UDim2.new(0,150,0,#Options*30),    
            Position = UDim2.new(0,0,0,30),    
            BackgroundColor3 = VexUI.Theme.Background,    
            Visible = false,    
            Parent = Tab.Frame    
        })    
        for i,opt in ipairs(Options) do    
            local btn = VexUI:New("TextButton", {    
                Text = opt,    
                Size = UDim2.new(1,0,0,30),    
                BackgroundColor3 = VexUI.Theme.Button,    
                TextColor3 = VexUI.Theme.Text,    
                Parent = listFrame    
            })    
            btn.Position = UDim2.new(0,0,0,(i-1)*30)    
            btn.MouseButton1Click:Connect(function()    
                dd.Text = Name.." ▼ "..opt    
                listFrame.Visible = false    
                listVisible = false    
                if Callback then Callback(opt) end    
            end)    
        end    
        dd.MouseButton1Click:Connect(function()    
            listVisible = not listVisible    
            listFrame.Visible = listVisible    
        end)    
        table.insert(Tab.Buttons, dd)    
        return dd    
    end    

    -- COLORPICKER  
    function Tab:ColorPicker(Name, DefaultColor, Callback)    
        local picker = VexUI:New("TextButton", {    
            Text = Name,    
            BackgroundColor3 = DefaultColor or Color3.new(1,0,0),    
            TextColor3 = VexUI.Theme.Text,    
            Size = UDim2.new(0,150,0,30),    
            Parent = Tab.Frame    
        })    
        picker.MouseButton1Click:Connect(function()    
            local c = Color3.fromHSV(math.random(),1,1)    
            picker.BackgroundColor3 = c    
            if Callback then Callback(c) end    
        end)    
        table.insert(Tab.Buttons, picker)    
        return picker    
    end    

    -- KEYBIND  
    function Tab:KeyBind(Name, DefaultKey, Callback)    
        local bindBtn = VexUI:New("TextButton", {    
            Text = Name.." ["..DefaultKey.Name.."]",    
            BackgroundColor3 = VexUI.Theme.Button,    
            TextColor3 = VexUI.Theme.Text,    
            Size = UDim2.new(0,150,0,30),    
            Parent = Tab.Frame    
        })  
        local key = DefaultKey  
        bindBtn.MouseButton1Click:Connect(function()  
            bindBtn.Text = Name.." [Press key...]"  
            local conn  
            conn = UserInputService.InputBegan:Connect(function(input)  
                if input.UserInputType == Enum.UserInputType.Keyboard then  
                    key = input.KeyCode  
                    bindBtn.Text = Name.." ["..key.Name.."]"  
                    if Callback then Callback(key) end  
                    conn:Disconnect()  
                end  
            end)  
        end)  
        UserInputService.InputBegan:Connect(function(input)  
            if input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == key then  
                if Callback then Callback(key) end  
            end  
        end)  
        table.insert(Tab.Buttons, bindBtn)  
        return bindBtn  
    end  

    -- SEARCHBAR  
    function Tab:SearchBar(Placeholder, Callback)  
        local Box = VexUI:New("TextBox", {  
            Text = Placeholder or "",  
            BackgroundColor3 = VexUI.Theme.Button,  
            TextColor3 = VexUI.Theme.Text,  
            Size = UDim2.new(0,150,0,30),  
            Parent = Tab.Frame  
        })  
        Box.FocusLost:Connect(function(enterPressed)  
            if enterPressed and Callback then  
                Callback(Box.Text)  
            end  
        end)  
        table.insert(Tab.Buttons, Box)  
        return Box  
    end  

    -- SHOW TAB  
    function Tab:Show()  
        for _,v in pairs(Window.TabHolder:GetChildren()) do  
            if v:IsA("Frame") then v.Visible = false end  
        end  
        Tab.Frame.Visible = true  
    end  

    return Tab  
end  

return Window

end

-- NOTIFICATION
function VexUI:Notify(Title, Content, Duration)
local Holder = self:New("Frame", {
Size = UDim2.new(0,300,0,50),
BackgroundColor3 = self.Theme.Background,
Position = UDim2.new(0.5,0,0.1,0),
AnchorPoint = Vector2.new(0.5,0),
Parent = Players.LocalPlayer.PlayerGui
})
local Label = self:New("TextLabel", {
Text = Title.."\n"..Content,
TextColor3 = self.Theme.Text,
BackgroundTransparency = 1,
Size = UDim2.new(1,0,1,0),
Parent = Holder
})
task.spawn(function()
task.wait(Duration or 3)
Holder:Destroy()
end)
end

-- RETURN TABLE
return VexUI
